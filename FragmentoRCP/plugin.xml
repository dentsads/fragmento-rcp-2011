<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.views">
      <view
            allowMultiple="false"
            category="FragmentoRCP.FragmentoCategory"
            class="fragmentorcp.views.RepositoryView"
            icon="icons/favicon.ico"
            id="FragmentoRCP.RepositoryView"
            name="%view.name"
            restorable="true">
      </view>
      <category
            id="FragmentoRCP.FragmentoCategory"
            name="%category.name">
      </category>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:FragmentoRCP.RepositoryView">
         <command
               commandId="fragmentorcp.commands.openOptionsCommand"
               icon="icons/toolbar_options.png"
               label="%command.label"
               style="push"
               tooltip="%command.tooltip">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_OPTIONS">
            </parameter>
         </command>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               icon="icons/refresh.png"
               label="%command.label.0"
               style="push"
               tooltip="%command.tooltip.0">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_REFRESH">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="FragmentoRCP.active">
                  <equals
                        value="ENABLED">
                  </equals>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="FragmentoRCP.separator1"
               visible="true">
         </separator>
         <command
               commandId="fragmentorcp.commands.openOptionsCommand"
               icon="icons/toolbar_plus.png"
               label="%command.label.1"
               style="push"
               tooltip="%command.tooltip.1">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="FragmentoRCP.active">
                  <equals
                        value="ENABLED">
                  </equals>
               </with>
            </visibleWhen>
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_CREATE_NEW_ITEM">
            </parameter>
         </command>
         <separator
               name="FragmentoRCP.separator1">
         </separator>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               icon="icons/toolbar_delete.png"
               label="%command.label.2"
               style="push"
               tooltip="%command.tooltip.2">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="FragmentoRCP.active">
                  <equals
                        value="ENABLED">
                  </equals>
               </with>
            </visibleWhen>
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_DELETE">
            </parameter>
         </command>
         <separator
               name="FragmentoRCP.separator2"
               visible="true">
         </separator>
         <command
               commandId="fragmentorcp.commands.openOptionsCommand"
               icon="icons/toolbar_search.png"
               label="%command.label.3"
               style="push"
               tooltip="%command.tooltip.3">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="FragmentoRCP.active">
                  <equals
                        value="ENABLED">
                  </equals>
               </with>
            </visibleWhen>
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_SEARCH">
            </parameter>
         </command>
         <separator
               name="FragmentoRCP.separator3"
               visible="true">
         </separator>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               icon="icons/toolbar_expand.gif"
               label="%command.label.4"
               style="push"
               tooltip="%command.tooltip.4">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="FragmentoRCP.active">
                  <equals
                        value="ENABLED">
                  </equals>
               </with>
            </visibleWhen>
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_EXPAND_ALL">
            </parameter>
         </command>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               icon="icons/toolbar_collapse.gif"
               label="%command.label.5"
               style="push"
               tooltip="%command.tooltip.5">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="FragmentoRCP.active">
                  <equals
                        value="ENABLED">
                  </equals>
               </with>
            </visibleWhen>
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_COLLAPSE_ALL">
            </parameter>
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:treePopupMenu">
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.6"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="CHECKOUT">
            </parameter>
            <visibleWhen>
               <with
                     variable="selection">
                  <iterate>
                     <instanceof
                           value="fragmentorcppresenter.models.repository.Artefact">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.7"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="CHECKIN">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate>
                     <instanceof
                           value="fragmentorcppresenter.models.repository.Artefact">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.12"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="RELEASE_LOCK">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate>
                     <instanceof
                           value="fragmentorcppresenter.models.repository.Artefact">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="FragmentoRCP.separator3"
               visible="true">       </separator>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="get bundle"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="GET_BUNDLE">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="selection">
                     <iterate>
                        <instanceof
                              value="fragmentorcppresenter.models.repository.Artefact">
                        </instanceof>
                     </iterate>
                  </with>
                  <with
                        variable="selection">
                     <iterate>
                        <instanceof
                              value="fragmentorcppresenter.models.repository.ArtefactHistoryBundle">
                        </instanceof>
                     </iterate>
                  </with>
               </or>
            </visibleWhen>
         </command>
         <separator
               name="FragmentoRCP.separator4"
               visible="true">
         </separator>
         <command
               commandId="fragmentorcp.commands.openOptionsCommand"
               label="%command.label.13"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate>
                     <instanceof
                           value="fragmentorcppresenter.models.repository.Relation">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="UPDATE_RELATION">
            </parameter>
         </command>
         <separator
               name="FragmentoRCP.separator1"
               visible="true">
         </separator>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.8"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_DELETE">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <or>
                  <with
                        variable="selection">
                     <iterate>
                        <instanceof
                              value="fragmentorcppresenter.models.repository.Relation">
                        </instanceof>
                     </iterate>
                  </with>
                  <with
                        variable="selection">
                     <iterate>
                        <instanceof
                              value="fragmentorcppresenter.models.repository.Artefact">
                        </instanceof>
                     </iterate>
                  </with>
               </or>
            </visibleWhen>
         </command>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.9"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="DELETE_FROM_REPO">
            </parameter>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate>
                     <instanceof
                           value="fragmentorcppresenter.models.repository.Relation">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="FragmentoRCP.separator2"
               visible="true">
         </separator>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.10"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_EXPAND_ALL">
            </parameter>
         </command>
         <command
               commandId="fragmentorcp.commands.toolbarRemainingCommand"
               label="%command.label.11"
               style="push">
            <parameter
                  name="FragmentoRCP.WizardParameter"
                  value="TOOLBAR_COLLAPSE_ALL">
            </parameter>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="fragmentorcp.commands.openOptionsCommandHandler"
            id="fragmentorcp.commands.openOptionsCommand"
            name="%command.name">
         <commandParameter
               id="FragmentoRCP.WizardParameter"
               name="%commandParameter.name">
         </commandParameter>
      </command>
      <command
            defaultHandler="fragmentorcp.commands.toolbarRemainingCommandHandler"
            id="fragmentorcp.commands.toolbarRemainingCommand"
            name="%command.name.0">
         <commandParameter
               id="FragmentoRCP.WizardParameter"
               name="%commandParameter.name.0">
         </commandParameter>
      </command>
      <command
            defaultHandler="fragmentorcp.commands.enableToolbarHandler"
            id="fragmentorcp.commands.enableToolbar"
            name="%command.name.1">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="fragmentorcp.commands.openOptionsCommand">
      </handler>
      <handler
            commandId="fragmentorcp.commands.toolbarRemainingCommand">
      </handler>
      <handler
            commandId="fragmentorcp.commands.enableToolbar">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            class="fragmentorcp.wizards.CreateWizard"
            id="FragmentoRCP.CreateWizard"
            name="%wizard.name">
      </wizard>
      <wizard
            class="fragmentorcp.wizards.pages.OpenOptionsPage"
            id="FragmentoRCP.OpenOptionsPage"
            name="%wizard.name.0">
      </wizard>      
      <wizard
            class="fragmentorcp.wizards.pages.CreateNewItemPage"
            id="FragmentoRCP.CreateNewItem"
            name="%wizard.name.2">
      </wizard>
      <wizard
            class="fragmentorcp.wizards.pages.SearchWizardPage1"
            id="FragmentoRCP.SearchWizardPage1"
            name="%wizard.name.3">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="fragmentorcp.sourceprovider.CommandState">
         <variable
               name="FragmentoRCP.active"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         id="product"
         point="org.eclipse.core.runtime.products">
      <product
            application="org.eclipse.equinox.p2.director.app.application"
            name="%product.name">
         <property
               name="appName"
               value="FragmentoRCP Plugin">
         </property>
      </product>
   </extension>

</plugin>
